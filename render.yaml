# No longer using Render PostgreSQL (suspended/deprecated)
# Database: Neon PostgreSQL (free tier) - configure DATABASE_URL in Render dashboard

services:
  - type: web
    name: japanese-study-api
    runtime: java
    buildCommand: |
      mvn clean package -DskipTests -T 1C --batch-mode
    startCommand: |
      java -Xms256m -Xmx512m -XX:+UseContainerSupport -Dspring.profiles.active=prod -jar target/*.jar
    plan: free
    envVars:
      # Set DATABASE_URL in Render dashboard from Neon connection string
      # Format: jdbc:postgresql://ep-xxx.region.aws.neon.tech/neondb?user=xxx&password=xxx&sslmode=require
      - key: DATABASE_URL
        sync: false  # Set manually in dashboard
      - key: DB_DRIVER
        value: "org.postgresql.Driver"
      - key: DB_DIALECT
        value: "org.hibernate.dialect.PostgreSQLDialect"
      - key: CORS_ORIGINS
        value: "http://localhost:5173,https://japanese-study-seven.vercel.app,https://*.vercel.app"
      - key: JWT_SECRET
        sync: false  # Set manually in dashboard
      - key: PORT
        value: "8080"

